function bindEventListeners(){$("#login-email, #register-email").on("blur",function(){$(this).val()&&validateEmail($(this))}),$("#login-pw, #register-pw, #register-pw-confirm").on("blur",function(){$(this).val()&&validatePassword($(this))}),$("#login-email, #login-pw").on("keyup",function(i){(13==i.which||13==i.keyCode)&&$("#login-button").click()}),$("#register-email, #register-pw, #register-pw-confirm").on("keyup",function(i){(13==i.which||13==i.keyCode)&&$("#register-button").click()}),$("#login-button").on("click",function(){var i=validateEmail($("#login-email")),e=validatePassword($("#login-pw"));if(i&&e){var r=$("#login-email").val(),t=$("#login-pw").val();login(r,t)}else $(".login-submit-error").text(INVALID_LOGIN_DEFAULT),$(".login-submit-error").css("visibility","visible"),setTimeout(function(){$(".login-submit-error").css("visibility","hidden")},3e3)}),$("#register-button").on("click",function(){var i=validateEmail($("#register-email")),e=validatePassword($("#register-pw")),r=validatePassword($("#register-pw-confirm")),t=$("#register-pw").val()===$("#register-pw-confirm").val();if(i&&e&&t){var s=$("#register-email").val(),o=$("#register-pw").val();return void register(s,o)}t||($(".register-pw-error").text(MATCHING_PASSWORD).show(),$(".register-pw-confirm-error").text(MATCHING_PASSWORD).show()),$(".register-submit-error").text(INVALID_REGISTER_DEFAULT),$(".register-submit-error").css("visibility","visible"),setTimeout(function(){$(".register-submit-error").css("visibility","hidden")},3e3)})}function validateEmail(i){var e=i.val();return checkEmailFormat(e)?($("."+i.attr("id")+"-error").hide(),!0):(UTILS.log("Invalid email"),$("."+i.attr("id")+"-error").show(),!1)}function validatePassword(i){var e=i.val();return e&&e.trim().length?($("."+i.attr("id")+"-error").hide(),!0):(UTILS.log("Invalid password"),$("."+i.attr("id")+"-error").show(),!1)}function checkEmailFormat(i){var e=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return e.test(i)}function register(i,e){var r=new Parse.User;r.set("username",i),r.set("email",i),r.set("password",e),r.signUp(null,{success:function(i){UTILS.log("Registered successfully "+i),window.location.href="list.html"},error:function(i,e){UTILS.log(i),UTILS.log(e),$(".register-submit-error").text(e.message),$(".register-submit-error").css("visibility","visible"),setTimeout(function(){$(".register-submit-error").css("visibility","hidden")},3e3)}})}function login(i,e){Parse.User.logIn(i,e,{success:function(i){UTILS.log("Successfully logged in "+i),window.location.href="list.html"},error:function(i,e){$(".login-submit-error").text(e.message),$(".login-submit-error").css("visibility","visible"),setTimeout(function(){$(".login-submit-error").css("visibility","hidden")},3e3)}})}const INVALID_EMAIL="Invalid email",INVALID_PASSWORD="Invalid password",INVALID_USER="Invalid user",INVALID_LOGIN_DEFAULT="Error logging in",EMAIL_TAKEN="Email taken",INVALID_REGISTER_DEFAULT="Error registering",MATCHING_PASSWORD="must match";var UTILS={debug:!0,log:function(i,e){UTILS.debug&&(e=e?e:"",console.log(i))}};$(document).on("ready",function(){Parse.initialize("hIP8KstprKjGsmE4VVHT86i2m1VobE8Mc0x7pBi6","ixAsSo9S7uCHLCKqdfKhUt1ZNcOBGX129Toy8QyO"),bindEventListeners()});